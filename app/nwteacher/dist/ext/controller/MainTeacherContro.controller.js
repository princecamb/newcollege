sap.ui.define(["sap/ui/core/mvc/ControllerExtension","jquery.sap.global","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,jQuery,t,o){"use strict";var r;return e.extend("nwteacher.ext.controller.MainTeacherContro",{override:{onInit:function(){var e=this.base.getExtensionAPI().getModel();var t=(new sap.ushell.services.UserInfo).getEmail();r=t;alert(r)},onBeforeRendering:async function(){debugger;var e=this.base.getExtensionAPI().getModel();if(!e){console.error("Model is not available.");return}var t;if(typeof e.getServiceUrl==="function"){t=e.getServiceUrl();console.log("Service URL:",t)}else{console.error("Unable to determine the service URL.");return}const o=this.base.getView().getContent()[0].mAggregations.content.mAggregations.content.mAssociations.filter;try{const e=await new Promise((e,o)=>{jQuery.ajax({url:t+"/Department",method:"GET",dataType:"json",success:function(t){e(t)},error:function(e,t,r){o(new Error(t+": "+r))}})});console.log("Fetched data:",e);if(e&&e.value){e.value.forEach(function(e){console.log("Department Name:",e.DepartmentName)})}else{console.log("No data found or invalid response format")}}catch(e){console.error("Error fetching data",e)}try{const e=await new Promise((e,o)=>{jQuery.ajax({url:t+"/AAuthorized",method:"GET",dataType:"json",success:function(t){e(t)},error:function(e,t,r){o(new Error(t+": "+r))}})});console.log("Fetched Authorization data:",e);var n;if(e&&e.value){e.value.forEach(function(e){if(e.authEmail===r){n=e.authName}}.bind(this))}else{console.log("No data found or invalid response format")}var a=this.getView().findAggregatedObjects(true,function(e){return e.isA("sap.ui.table.Table")||e.isA("sap.m.Table")})[0];debugger;var i=a.getBinding("items");if(n!=="Owner"){this.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Button")}).forEach(function(e){if(e.getId().includes("Create")||e.getId().includes("Delete")){e.setVisible(false)}});this.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.fe.macros.controls.FilterBar")}).forEach(function(e){e.setVisible(true)});this.base.getView().getContent()[0].mAggregations.header.mAggregations.content[0].mAggregations.items[0].mAggregations.content.setFilterConditions({$editState:[{operator:"DRAFT_EDIT_STATE",values:["ALL_HIDING_DRAFTS"],validated:"Validated"}]})}}catch(e){console.error("Error fetching Roll data",e)}}}})});
//# sourceMappingURL=MainTeacherContro.controller.js.map